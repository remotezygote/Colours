var Colorspace={Color:function(a){this.ok=false;this.isColor=true;if(!a){a="#000"}this.fromHSV=function(e){var h,k,l,j,g;e.h%=360;if(e.v==0){this.r=this.g=this.b=0;return(this)}e.s/=100;e.v/=100;e.h/=60;h=Math.floor(e.h);k=e.h-h;l=e.v*(1-e.s);j=e.v*(1-(e.s*k));g=e.v*(1-(e.s*(1-k)));if(h==0){this.r=e.v;this.g=g;this.b=l}else{if(h==1){this.r=j;this.g=e.v;this.b=l}else{if(h==2){this.r=l;this.g=e.v;this.b=g}else{if(h==3){this.r=l;this.g=j;this.b=e.v}else{if(h==4){this.r=g;this.g=l;this.b=e.v}else{if(h==5){this.r=e.v;this.g=l;this.b=j}}}}}}this.r=Math.floor(this.r*255);this.g=Math.floor(this.g*255);this.b=Math.floor(this.b*255);return(this)};if(typeof a=="string"){if(a.charAt(0)=="#"){a=a.substr(1,6)}a=a.replace(/ /g,"");a=a.toLowerCase();var c=[{matcher:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4],10)]}},{matcher:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{matcher:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{matcher:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];for(var b=0;b<c.length;b++){var d=c[b].matcher.exec(a);if(d){channels=c[b].process(d);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.alpha=channels.length>3?channels[3]:1;this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.alpha=(this.alpha<0||isNaN(this.alpha))?1:((this.alpha>1)?1:this.alpha)}else{if(typeof a=="object"&&a.length){this.r=(a[0]<0||isNaN(a[0]))?0:((a[0]>255)?255:a[0]);this.g=(a[1]<0||isNaN(a[1]))?0:((a[1]>255)?255:a[1]);this.b=(a[2]<0||isNaN(a[2]))?0:((a[2]>255)?255:a[2]);this.alpha=(!a[3]||a[3]<0||isNaN(a[3]))?1:((a[3]>1)?1:a[3]);this.ok=true}else{if(typeof a=="object"){if(a.h!=undefined&&a.s!=undefined&&(a.v!=undefined||a.b!=undefined)){if(a.b){a.v=a.b}this.fromHSV(a)}else{if(a.c&&a.m&&a.y&&a.k){}}}else{}}}this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toRGBa=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};this.brightness=function(){return(Math.sqrt(this.r*this.r*0.241+this.g*this.g*0.691+this.b*this.b*0.068))};this.toHSV=function(){var p,h,n,k,m,j,h;m=0;var e=this.r,l=this.g,o=this.b;e/=255;l/=255;o/=255;p=Math.min(Math.min(e,l),o);h=Math.max(Math.max(e,l),o);if(p==h){return({h:0,s:0,v:h*100})}n=(e==p)?l-o:((l==p)?o-e:e-l);k=(e==p)?3:((l==p)?5:1);m=Math.floor((k-n/(h-p))*60)%360;j=Math.floor(((h-p)/h)*100);h=Math.floor(h*100);return({h:m,s:j,v:h})};this.lightness=function(){return(this.brightness())};this.toHex=function(){var h=this.r.toString(16).replace(/\..*/,"");var f=this.g.toString(16).replace(/\..*/,"");var e=this.b.toString(16).replace(/\..*/,"");if(h.length==1){h="0"+h}if(f.length==1){f="0"+f}if(e.length==1){e="0"+e}return"#"+h+f+e}},Gradient:function(c,a,b){this.start=c.isColor?c:new Colorspace.Color(c);this.end=a.isColor?a:new Colorspace.Color(a);this.atPercent=function(d){return(new Colorspace.Color([this.start.r>this.end.r?this.start.r-((this.start.r-this.end.r)*(d/100)):this.start.r+((this.end.r-this.start.r)*(d/100)),this.start.g>this.end.g?this.start.g-((this.start.g-this.end.g)*(d/100)):this.start.g+((this.end.g-this.start.g)*(d/100)),this.start.b>this.end.b?this.start.b-((this.start.b-this.end.b)*(d/100)):this.start.b+((this.end.b-this.start.b)*(d/100))]))}}};